<mvc:View
    controllerName="hmelpaper.controller.Overview"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:svm="sap.ui.comp.smartvariants"
    xmlns:ui="sap.ui.table"
    xmlns:vm="sap.ui.fl.variants"
    xmlns:sfb="sap.ui.comp.smartfilterbar"
    xmlns:columnmenu="sap.m.table.columnmenu"
    xmlns:sap.ui.fl="sap.ui.fl"
    xmlns:sap.ui.dt="sap.ui.dt"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
>

    <f:DynamicPage busyIndicatorDelay="500">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <svm:SmartVariantManagement
                       id="svm"
                       selectionKey="STANDARD"
                      showExecuteOnSelection="true" />
                </f:heading>

                <f:expandedContent>
                    <Label
                        id="expandedLabel"
                        
                        text="No filters active"
                    />
                </f:expandedContent>
                <f:snappedContent>
                    <Label
                        id="snappedLabel"
                        text="No filters active"
                    />
                </f:snappedContent>
                <f:actions>
                    <Button
                        text="New"
                        type="Emphasized"
                        class="sapUiSmallMarginEnd sapUiPositive"
                        press=".onCreate"
                    />
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader>
                <f:content>
                    <fb:FilterBar
                        id="tradeFilterBar"
                        persistencyKey="myPersKey"
                        useToolbar="false"
                        search=".onSearch"
                        filterChange=".onFilterChange"
                        afterVariantLoad=".onAfterVariantLoad"
                        showClearOnFB="true" clear=".onClear"
                    >
                        <fb:filterGroupItems>
                            <fb:FilterGroupItem
                                name="TRADE_NO"
                                label="Trade Number"
                                groupName="General"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <Input
                                        placeholder="Enter Trade Number"
                                        change=".onFilterChangeInput"
                                    />
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                name="counterpart/ID"
                                label="Counter Part"
                                groupName="General"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        name="Counterpart"
                                        selectionChange=".onSelectionChange"
                                        items="{oDataTradeEntry>/Counterpart}"
                                    >
                                        <core:Item
                                            key="{oDataTradeEntry>ID}"
                                            text="{oDataTradeEntry>CTPRTNAME}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                name="trader/ID"
                                label="Trader"
                                groupName="General"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        items="{path: 'oDataTradeEntry>/Trader'}"
                                        selectionChange=".onSelectionChange"
                                    >
                                        <core:Item
                                            key="{oDataTradeEntry>ID}"
                                            text="{oDataTradeEntry>TRDRNAME}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                name="/ID"
                                label="Trade Date"
                                groupName="General"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        name="Trade Date"
                                        selectionChange=".onSelectionChange"
                                        items="{ path: 'oDataTradeEntry>/TradeEntry' }"
                                    >
                                        <core:Item
                                            key="{oDataTradeEntry>TRADE_DAT}"
                                            text="{oDataTradeEntry>TRADE_DAT}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                name="Commodity/ID"
                                label="Commodity"
                                groupName="General"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        name="Commodity"
                                        selectionChange=".onSelectionChange"
                                        items="{ path: 'oDataTradeEntry>/Commodity' }"
                                    >
                                        <core:Item
                                            key="{oDataTradeEntry>ID}"
                                            text="{oDataTradeEntry>CMDTYNAME}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                           
                            <fb:FilterGroupItem
                                name="deliveryTerms/ID"
                                label="Delivery Terms"
                                groupName="General"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        items="{path: 'oDataTradeEntry>/DeliveryTerms'}"
                                        selectionChange=".onSelectionChange"
                                    >
                                        <core:Item
                                            key="{oDataTradeEntry>DLVTRMID}"
                                            text="{oDataTradeEntry>DLVTRMNAME}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                name="Location/ID"
                                label="Delivery Location"
                                groupName="General"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        items="{path: 'oDataTradeEntry>/Location'}"
                                        selectionChange=".onSelectionChange"
                                    >
                                        <core:Item
                                            key="{oDataTradeEntry>ID}"
                                            text="{oDataTradeEntry>LOCNAME}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                name="ZSCHEDULE"
                                label="Delivery Schedule"
                                groupName="General"
                                visibleInFilterBar="false"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        items="{
                path: 'oDataTradeEntry>/DeliverySchedule',
                parameters: { $select: 'ID,NAME' }
            }"
                                        selectionChange=".onSelectionChange"
                                    >
                                        <core:Item
                                            key="{oDataTradeEntry>ID}"
                                            text="{oDataTradeEntry>NAME}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                name="Period/ZPERIODID"
                                label="Delivery Period"
                                groupName="General"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        items="{
                path: 'oDataTradeEntry>/Period',
                parameters: { $select: 'ZPERIODID,PERIDNAME' }
            }"
                                        selectionChange=".onSelectionChange"
                                    >
                                        <core:Item
                                            key="{oDataTradeEntry>ZPERIODID}"
                                            text="{oDataTradeEntry>PERIDNAME}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                name="TradeMain/TRADEID"
                                label="Trade Type"
                                groupName="General"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        items="{
                path: 'oDataTradeEntry>/TradeMain',
                parameters: { $select: 'TRADEID,TRADETYPENAME' }
            }"
                                        selectionChange=".onSelectionChange"
                                    >
                                        <core:Item
                                            key="{oDataTradeEntry>TRADEID}"
                                            text="{oDataTradeEntry>TRADETYPENAME}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                           
                           
                        </fb:filterGroupItems>
                    </fb:FilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <ui:Table
                visible="true"
                id="dashboardTable"
                enableBusyIndicator="true"
                busyIndicatorSize="Medium"
                rows="{ path: '/TradeEntry', parameters: { '$expand': 'counterpart,trader,commodity,deliveryTerms' } }"
                selectionMode="None"
                sap.ui.fl:flexibility="sap/m/flexibility/EngineFlex"
                rowActionCount="1"
                width="100%"
            >
                <ui:extension>
                    <OverflowToolbar>
                        <Title
                            id="title"
                            text="Trades"
                        />
                        <ToolbarSpacer />
                        <Button
                            icon="sap-icon://action-settings"
                            press="openPersoDialog"
                        />
                    </OverflowToolbar>
                </ui:extension>

                <ui:dependents>
                    <columnmenu:Menu
                        id="menu"
                        showTableSettingsButton="true"
                        tableSettingsPressed="openPersoDialog"
                    />
                </ui:dependents>

                <ui:rowActionTemplate>
                    <ui:RowAction visible="true">
                        <ui:RowActionItem
                            type="Navigation"
                            press=".onRowPress"
                        />
                    </ui:RowAction>
                </ui:rowActionTemplate>

                <ui:columns>
                    <ui:Column
                        width="10rem"
                        hAlign="Center"
                        headerMenu="menu"
                    >
                        <Label text="Trade Number" />
                        <ui:template>
                            <Text text="{TRADE_NO}" />
                        </ui:template>
                    </ui:Column>

                    <ui:Column
                        width="10rem"
                        hAlign="Center"
                        headerMenu="menu"
                    >
                        <Label text="Counter Part" />
                        <ui:template>
                            <Text text="{counterpart/CTPRTNAME}" />
                        </ui:template>
                    </ui:Column>

                    <ui:Column
                        width="10rem"
                        hAlign="Center"
                        headerMenu="menu"
                    >
                        <Label text="Trader" />
                        <ui:template>
                            <Text text="{trader/TRDRNAME}" />
                        </ui:template>
                    </ui:Column>

                    <ui:Column
                        width="10rem"
                        hAlign="Center"
                        headerMenu="menu"
                    >
                        <Label text="Trade Date" />
                        <ui:template>
                            <Text text="{TRADE_DAT}" />
                        </ui:template>
                    </ui:Column>

                    <ui:Column
                        width="10rem"
                        hAlign="Center"
                        headerMenu="menu"
                    >
                        <Label text="Commodity" />
                        <ui:template>
                            <Text text="{commodity/CMDTYNAME}" />
                        </ui:template>
                    </ui:Column>

                    <ui:Column
                        width="10rem"
                        hAlign="Center"
                        headerMenu="menu"
                    >
                        <Label text="Delivery Terms" />
                        <ui:template>
                            <Text text="{deliveryTerms/DLVTRMNAME}" />
                        </ui:template>
                    </ui:Column>

                    <ui:Column
                        width="10rem"
                        hAlign="Center"
                        headerMenu="menu"
                    >
                        <Label text="Delivery Schedule" />
                        <ui:template>
                            <Text text="{ZSCHEDULE}" />
                        </ui:template>
                    </ui:Column>

                    <ui:Column
                        width="10rem"
                        hAlign="Center"
                        headerMenu="menu"
                    >
                        <Label text="Delivery Location" />
                        <ui:template>
                            <Text text="{location/LOCNAME}" />
                        </ui:template>
                    </ui:Column>

                    <ui:Column
                        width="10rem"
                        hAlign="Center"
                        headerMenu="menu"
                    >
                        <Label text="Delivery Period" />
                        <ui:template>
                            <Text text="{Period/PERIDNAME}" />
                        </ui:template>
                    </ui:Column>

                    <ui:Column
                        width="10rem"
                        hAlign="Center"
                        headerMenu="menu"
                    >
                        <Label text="Trade Type" />
                        <ui:template>
                            <Text text="{TradeMain/TRADETYPENAME}" />
                        </ui:template>
                    </ui:Column>
                </ui:columns>
            </ui:Table>
        </f:content>
    </f:DynamicPage>
</mvc:View>
